{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\a\\\\OneDrive\\\\Desktop\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// import './App.css';\n// import Router from './Router';\n\n// function App() {\n//   return (\n//     <Router/>\n//   );\n// }\n\n// export default App;\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport Router from './Router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useActivityDetector = (timeout = 15 * 1000) => {\n  _s();\n  const [lastActivityTime, setLastActivityTime] = useState(Date.now());\n  const resetActivityTimer = useCallback(() => {\n    setLastActivityTime(Date.now());\n  }, []);\n  useEffect(() => {\n    const events = ['mousemove', 'keydown', 'mousedown', 'touchstart'];\n    const handleActivity = () => {\n      resetActivityTimer();\n    };\n    events.forEach(event => {\n      window.addEventListener(event, handleActivity);\n    });\n    return () => {\n      events.forEach(event => {\n        window.removeEventListener(event, handleActivity);\n      });\n    };\n  }, [resetActivityTimer]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (Date.now() - lastActivityTime < timeout) {\n        // Detected activity, refresh token\n        axios.post('http://localhost:8000/login/refreshToken', {}, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        }).then(response => {\n          const {\n            token\n          } = response.data;\n          localStorage.setItem('token', token);\n          console.log('Token renovado:', token);\n        }).catch(error => {\n          console.error('Error al renovar el token', error);\n        });\n      }\n    }, timeout / 2); // Refresh token before it expires\n\n    return () => clearInterval(interval);\n  }, [lastActivityTime, timeout]);\n  return lastActivityTime;\n};\n_s(useActivityDetector, \"F9NyGzfif0F5gShy9Pn0Ryeo7as=\");\nconst App = () => {\n  _s2();\n  useActivityDetector();\n  return /*#__PURE__*/_jsxDEV(Router, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 7\n  }, this);\n};\n_s2(App, \"GXrhzufuCue0mOkKILoliyiYOiQ=\", false, function () {\n  return [useActivityDetector];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","Router","jsxDEV","_jsxDEV","useActivityDetector","timeout","_s","lastActivityTime","setLastActivityTime","Date","now","resetActivityTimer","events","handleActivity","forEach","event","window","addEventListener","removeEventListener","interval","setInterval","post","headers","localStorage","getItem","then","response","token","data","setItem","console","log","catch","error","clearInterval","App","_s2","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/a/OneDrive/Desktop/frontend/src/App.js"],"sourcesContent":["// import './App.css';\n// import Router from './Router';\n\n// function App() {\n//   return (\n//     <Router/>\n//   );\n// }\n\n// export default App;\n\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport Router from './Router';\n\n\nconst useActivityDetector = (timeout = 15 * 1000) => {\n    const [lastActivityTime, setLastActivityTime] = useState(Date.now());\n\n    const resetActivityTimer = useCallback(() => {\n        setLastActivityTime(Date.now());\n    }, []);\n\n    useEffect(() => {\n        const events = ['mousemove', 'keydown', 'mousedown', 'touchstart'];\n\n        const handleActivity = () => {\n            resetActivityTimer();\n        };\n\n        events.forEach((event) => {\n            window.addEventListener(event, handleActivity);\n        });\n\n        return () => {\n            events.forEach((event) => {\n                window.removeEventListener(event, handleActivity);\n            });\n        };\n    }, [resetActivityTimer]);\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            if (Date.now() - lastActivityTime < timeout) {\n                // Detected activity, refresh token\n                axios.post('http://localhost:8000/login/refreshToken', {}, {\n                    headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`\n                    }\n                }).then((response) => {\n                    const { token } = response.data;\n                    localStorage.setItem('token', token);\n                    console.log('Token renovado:', token);\n                }).catch((error) => {\n                    console.error('Error al renovar el token', error);\n                });\n            }\n        }, timeout / 2); // Refresh token before it expires\n\n        return () => clearInterval(interval);\n    }, [lastActivityTime, timeout]);\n\n    return lastActivityTime;\n};\n\nconst App = () => {\n    useActivityDetector();\n\n    return (\n      <Router/>\n    );\n};\n\nexport default App;\n"],"mappings":";;;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAGA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG9B,MAAMC,mBAAmB,GAAGA,CAACC,OAAO,GAAG,EAAE,GAAG,IAAI,KAAK;EAAAC,EAAA;EACjD,MAAM,CAACC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGX,QAAQ,CAACY,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EAEpE,MAAMC,kBAAkB,GAAGZ,WAAW,CAAC,MAAM;IACzCS,mBAAmB,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAENZ,SAAS,CAAC,MAAM;IACZ,MAAMc,MAAM,GAAG,CAAC,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC;IAElE,MAAMC,cAAc,GAAGA,CAAA,KAAM;MACzBF,kBAAkB,CAAC,CAAC;IACxB,CAAC;IAEDC,MAAM,CAACE,OAAO,CAAEC,KAAK,IAAK;MACtBC,MAAM,CAACC,gBAAgB,CAACF,KAAK,EAAEF,cAAc,CAAC;IAClD,CAAC,CAAC;IAEF,OAAO,MAAM;MACTD,MAAM,CAACE,OAAO,CAAEC,KAAK,IAAK;QACtBC,MAAM,CAACE,mBAAmB,CAACH,KAAK,EAAEF,cAAc,CAAC;MACrD,CAAC,CAAC;IACN,CAAC;EACL,CAAC,EAAE,CAACF,kBAAkB,CAAC,CAAC;EAExBb,SAAS,CAAC,MAAM;IACZ,MAAMqB,QAAQ,GAAGC,WAAW,CAAC,MAAM;MAC/B,IAAIX,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGH,gBAAgB,GAAGF,OAAO,EAAE;QACzC;QACAL,KAAK,CAACqB,IAAI,CAAC,0CAA0C,EAAE,CAAC,CAAC,EAAE;UACvDC,OAAO,EAAE;YACL,eAAe,EAAG,UAASC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;UAC7D;QACJ,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;UAClB,MAAM;YAAEC;UAAM,CAAC,GAAGD,QAAQ,CAACE,IAAI;UAC/BL,YAAY,CAACM,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;UACpCG,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEJ,KAAK,CAAC;QACzC,CAAC,CAAC,CAACK,KAAK,CAAEC,KAAK,IAAK;UAChBH,OAAO,CAACG,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACrD,CAAC,CAAC;MACN;IACJ,CAAC,EAAE5B,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEjB,OAAO,MAAM6B,aAAa,CAACf,QAAQ,CAAC;EACxC,CAAC,EAAE,CAACZ,gBAAgB,EAAEF,OAAO,CAAC,CAAC;EAE/B,OAAOE,gBAAgB;AAC3B,CAAC;AAACD,EAAA,CA/CIF,mBAAmB;AAiDzB,MAAM+B,GAAG,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACdhC,mBAAmB,CAAC,CAAC;EAErB,oBACED,OAAA,CAACF,MAAM;IAAAoC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;AAEf,CAAC;AAACJ,GAAA,CANID,GAAG;EAAA,QACL/B,mBAAmB;AAAA;AAAAqC,EAAA,GADjBN,GAAG;AAQT,eAAeA,GAAG;AAAC,IAAAM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}